{% extends "frontend_base.html" %}
{% load staticfiles %}

{% block title %}Edit Sales Details{% endblock %}

{% block page_css %}
    <!-- ================== BEGIN PAGE LEVEL CSS STYLE ================== -->
    <link href="{% static "assets/plugins/gritter/css/jquery.gritter.css"%}" rel="stylesheet" />

    <link href="{% static "assets/plugins/DataTables/css/data-table.css"%}" rel="stylesheet" />
    <!-- ================== END PAGE LEVEL STYLE ================== -->

{% endblock %}

{% block sidebar %}
  {% include "common/sidebar.html" with menu="accounts" submenu="sales"%}
{% endblock %}

{% block breadcrumbs %}
<!-- begin breadcrumb -->
<ol class="breadcrumb pull-right">
    <li><a href="javascript:;">Home</a></li>
    <li><a href="/frontend/accounts/">Accounts</a></li>
    <li><a href="/frontend/accounts/sales/">Sales</a></li>
    <li class="active">Edit Sales Details</li>
</ol>
<!-- end breadcrumb -->
<!-- begin page-header -->
<h1 class="page-header">Edit Sales Details</h1>
<!-- end page-header -->
{% endblock %}

{% block contents %}
    <input type="hidden" name="sales_id" data-pk="{{pk}}"  value="{{pk}}" id="sales_id">
    <!-- begin row -->
    <div class="profile-container">
            <!-- begin profile-section -->
            <div class="profile-section">
                <!-- begin profile-left -->
                <div class="profile-left">
                    <!-- begin profile-image -->
                    <div class="profile-image">
                        <img src="{% static "assets/img/profile-cover.jpg"%}" id="profile-image">
                    </div>
                    <!-- end profile-image -->
                </div>
                <!-- end profile-left -->
                <!-- begin profile-right -->
                <div class="profile-right">
                    <!-- begin profile-info -->
                    <div class="profile-info">
                        <!-- begin table -->
                        <div class="table-responsive">
                            <table class="table table-profile">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th colspan="3">
                                            <h4 class="customer-name"></h4>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="divider">
                                        <td colspan="4"></td>
                                    </tr>
                                    <tr>
                                        <td class="field">Mobile</td>
                                        <td><i class="fa fa-mobile fa-lg m-r-5"></i><label class="customer-mobile"></label></td>
                                        <td class="field">Current Address</td>
                                        <td><label class="customer-address1"></label></td>
                                    <tr>
                                        <td class="field">Alternate Contact</td>
                                        <td><i class="fa fa-mobile fa-lg m-r-5"></i><label class="customer-alternate_mobile"></label></td>
                                        <td class="field">Permenant Address</td>
                                        <td><label class="customer-address2"></label></td>
                                    </tr>
                                    <tr>
                                        <td class="field">Email</td>
                                        <td><label class="customer-email"></label></td>
                                        <td class="field">Pin Code</td>
                                        <td><label class="customer-pin_code"></label></td>
                                    </tr>
                                    <tr>
                                        <td class="field">Occupation</td>
                                        <td><label class="customer-occupation"></label></td>
                                        <td class="field">Date of birth</td>
                                        <td><label class="customer-dob"></label></td>
                                    </tr>
                                    <tr>
                                        <td class="field">Age</td>
                                        <td><label class="customer-age"></label></td>
                                        <td class="field">Marriage Anniversary</td>
                                        <td><label class="customer-marriage_anniversary"></label></td>
                                    </tr>                                        
                                    <tr class="divider">
                                        <td colspan="4"></td>
                                    </tr>
                                    <tr>
                                        <td class="field">Nominee Name</td>
                                        <td><label class="customer-nominee_name"></label></td>
                                        <td class="field">Relation</td>
                                        <td><label class="customer-relation"></label></td>
                                    </tr>
                                    <tr class="divider">
                                        <td colspan="4"></td>
                                    </tr>
                                    <tr>
                                        <td class="field">Booking Date</td>
                                        <td class="booking_date"></td>
                                        <td class="field">Booking Amount</td>
                                        <td class="booking_amount"></td>
                                    </tr>
                                    <tr>
                                        <td class="field">EMI</td>
                                        <td class="is_emi_enabled"></td>
                                        <td class="field">Basic Amount</td>
                                        <td class="basic_cost"></td>
                                    </tr>
                                    <tr>
                                        <td class="field">Sale Amount</td>
                                        <td class="sales_cost"></td>
                                        <td class="field">Remaining Amount</td>
                                        <td class="remaning_cost"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- end table -->
                    </div>
                    <!-- end profile-info -->
                </div>
                <!-- end profile-right -->
            </div>
            <!-- end profile-section -->
        <div class="col-md-12">
        <ul class="nav nav-tabs">
            <li class="active"><a href="#default-tab-1" data-toggle="tab" aria-expanded="true">Plot Details</a></li>
            <li class=""><a href="#default-tab-2" data-toggle="tab" aria-expanded="false">Finance and EMI</a></li>
            <li class=""><a href="#default-tab-3" data-toggle="tab" aria-expanded="false">Transactions</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane fade active in" id="default-tab-1">
              <table class="table table-profile">
                <input type="hidden" name="plot_no" id="plot_no" value="">
                <tbody>
                  <tr>
                    <td class="field">Plot No</td>
                        <td><label class="plot-plot_no"></label></td>
                        <td class="field">Project Name</td>
                        <td><label class="plot-project_name"></label></td>
                    </tr>
                    <tr>
                        <td class="field">Facing</td>
                        <td><label class="plot-facing"></label></td>
                        <td class="field">Area</td>
                        <td><label class="plot-area"></label></td>
                    </tr>
                    <tr>
                        <td class="field">Width</td>
                        <td><label class="plot-width"></label></td>
                        <td class="field">Breadth</td>
                        <td><label class="plot-breadth"></label></td>
                    </tr>
                    <tr>
                        <td class="field">Rate</td>
                        <td><label class="plot-rate_per_sqft"></label></td>
                        <td class="field">Breadth</td>
                        <td><label class="plot-breadth"></label></td>
                    </tr>
                    <tr>
                        <td class="field">Survey No</td>
                        <td><label class="plot-survey_no"></label></td>
                    </tr>
                </tbody>
              </table>
            </div>
            <div class="tab-pane fade" id="default-tab-2">
              <form class="form-horizontal" id="booking-edit-form">
              <input type="hidden" name="sales_id" id="sales_id" value="">
              <input type="hidden" name="booking_id" id="booking_id" value="">
              <!-- Start col-md-12 -->
              <div class="col-md-12">
                <!-- Start col md 6 -->
                <div class="col-md-6">
                  <!-- Text input-->
                    <div class="form-group">
                      <label class="col-md-4 control-label" for="payment_duration">Payment Type</label>
                      <div class="col-md-8">
                        <label class="checkbox-inline">
                            <input value="emi" name="emi" id="emi" type="checkbox">
                            <span>EMI</span>
                        </label>
                      </div>
                    </div>
                </div>
                <!-- End col md 6 -->
                <!-- Start col md 6 -->
                <div class="col-md-6">
                    <!-- Text input-->
                      <div class="form-group">
                        <label class="col-md-4 control-label" for="total_amount">Total Amount</label>
                        <div class="col-md-8">
                           <input id="total_amount" name="total_amount" placeholder="Total Amount" class="form-control input-md" required="" disabled="disabled" type="text">
                        </div>
                      </div>
                </div>
              <!-- End col md 6 -->
            </div>
            <!-- End col md 12 -->
            <!-- Start col-md-12 -->
              <div class="col-md-12">
                <!-- Start col md 6 -->
                <div class="col-md-6">
                  <!-- Text input-->
                  <div class="form-group">
                    <label class="col-md-4 control-label" for="booking_amount">Booking Amount</label>
                    <div class="col-md-8">
                      <input id="booking_amount" onkeyup="calculateLoanAmount()" name="booking_amount" placeholder="Booking Amount" class="form-control input-md" required="" type="text">
                    </div>
                  </div>
                  <!-- Text input-->
                  <div class="form-group">
                    <label class="col-md-4 control-label" for="booking_amount_method">Booking Amount Method</label>
                    <div class="col-md-8">
                      <select id="booking_amount_method" name="booking_amount_method" class="form-control input-md">
                        <option value="Cash">Cash</option>
                        <option value="DD">DD</option>
                        <option value="Cheque">Cheque</option>
                        <option value="Online Transfer">Online Transfer</option>
                      </select>
                    </div>
                  </div>
                </div>
                <!-- End col md 6 -->
                <!-- Start col md 6 -->
                <div class="col-md-6">
                    <!-- Text input-->
                    <div class="form-group">
                      <label class="col-md-4 control-label" for="booking_date">Booking Date</label>
                      <div class="col-md-8">
                         <input id="booking_date" name="booking_date" placeholder="Booking Date" class="form-control input-md datepicker hasDatepicker" required="" type="text">
                      </div>
                    </div>
                    <!-- Text input-->
                  <div class="form-group">
                    <label class="col-md-4 control-label" for="booking_txn_no">Cheque/DD/Transaction No</label>
                    <div class="col-md-8">
                      <input id="booking_txn_no" name="txn_no" placeholder="Cheque/DD/Transaction No" class="form-control input-md" required="" type="text">
                    </div>
                  </div>
                </div>
              <!-- End col md 6 -->
            </div>
            <!-- End col md 12 -->

            <!-- Start col-md-12 -->
            <div class="col-md-12">
              <!-- Start col md 6 -->
              <div class="col-md-6">
                <!-- Text input-->
                <div class="form-group">
                  <label class="col-md-4 control-label" for="down_payment">Down Payment</label>
                  <div class="col-md-8">
                    <input id="down_payment" name="down_payment" onkeyup="calculateLoanAmount()" placeholder="Down Payment" class="form-control input-md" required="" type="text" value="0">
                  </div>
                </div>
                <!-- Text input-->
                <div class="form-group">
                  <label class="col-md-4 control-label" for="down_payment_method">Down Payment Method</label>
                  <div class="col-md-8">
                    <select id="down_payment_method" name="down_payment_method" class="form-control input-md">
                        <option value="Cash">Cash</option>
                        <option value="DD">DD</option>
                        <option value="Cheque">Cheque</option>
                        <option value="Online Transfer">Online Transfer</option>
                      </select>
                  </div>
                </div>
              </div>
              <!-- End col md 6 -->
              <!-- Start col md 6 -->
              <div class="col-md-6">
                  <!-- Text input-->
                  <div class="form-group">
                    <label class="col-md-4 control-label" for="down_payment_date">Down Payment Date</label>
                    <div class="col-md-8">
                       <input id="down_payment_date" name="down_payment_date" placeholder="Down Payment Date" class="form-control input-md datepicker hasDatepicker" required="" type="text">
                    </div>
                  </div>
                  <!-- Text input-->
                <div class="form-group">
                  <label class="col-md-4 control-label" for="down_payment_txn_no">Cheque/DD/Transaction No</label>
                  <div class="col-md-8">
                    <input id="down_payment_txn_no" name="down_payment_txn_no" placeholder="Cheque/DD/Transaction No" class="form-control input-md" required="" type="text">
                  </div>
                </div>
              </div>
            <!-- End col md 6 -->
         
            <!-- Start col md 6 -->
            <div class="col-md-6 emi-div" style="display: none;">
                <input type="hidden" name="emi_id" id="emi_id" value="">
                <!-- Text input-->
                <div class="form-group">
                  <label class="col-md-4 control-label" for="loan_amount">Loan Amount</label>
                  <div class="col-md-4">
                     <input id="loan_amount" name="loan_amount" placeholder="Loan Amount" class="form-control input-md" required="" type="text">
                  </div>
                  <div class="col-md-4">
                    <input id="emi_day" name="emi_day" placeholder="EMI Day" class="form-control input-md" required="" type="text" value="7">
                  </div>
                </div>
                <!-- Text input-->
                <div class="form-group">
                  <label class="col-md-4 control-label" for="emi_intrest">Intrest</label>
                  <div class="col-md-4">
                     <input id="emi_intrest" name="emi_intrest" placeholder="Intrest" class="form-control input-md" required="" type="text" value="9.45">
                  </div>
                  <div class="col-md-4">
                    <select id="emi_terms" name="emi_terms" class="form-control input-md">
                      <option value="6">6 Months</option>
                      <option value="12">1 Year</option>
                      <option value="36">3 Years</option>
                      <option value="60">5 Years</option>
                      <option value="96">8 Years</option>
                      <option value="120">10 Years</option>
                      <option value="180">15 Years</option>
                      <option value="240">20 Years</option>
                    </select>
                  </div>
                  <div class="col-md-4"></div>
                  <div class="col-md-4 p-10">
                    <a href="javascript:;" id="calculate-emi" style="display:none;">
                      <button type="button" class="btn btn-xs m-r-5 btn-inverse">Calculate EMI</button>
                    </a>
                  </div>
                </div>
            </div>
            <!-- End col md 6 -->
            <div class="col-md-12">
              <button type="button" class="btn btn-inverse m-r-5 m-b-5 pull-right" id="change-button">Change</button>
              <button type="button" class="btn btn-inverse m-r-5 m-b-5 pull-right"  style="display:none;" id="update-button">Update</button>
            </div>
          </div>
          <!-- End col md 12 -->
            <!-- Start col-md-12 -->
            <div class="col-md-12 payments-div" style="display: none;">
              <table id="payments-table" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Date</th>
                        <th>Amount</th>
                        <th>Paid Status</th>
                    </tr>
                </thead>
                <tbody id="payments-data">
                   
                </tbody>
              </table>
            </div>
          </form>
          <!-- End tab 2 -->
          </div>
          <div class="tab-pane fade" id="default-tab-3">
             <table id="transaction-table" class="table table-striped table-bordered">
                <thead>
                  <tr>
                      <th>#</th>
                      <th>Date</th>
                      <th>Amount</th>
                      <th>Type</th>
                      <th>Payment Mode</th>
                      <th>Transaction No</th>
                      <th>Transaction Status</th>
                  </tr>
                </thead>
                <tbody id="payments-data">
                   
                </tbody>
              </table>
          </div>
        </div>
      </div>
  </div>

  <!-- end panel -->
  <div class="modal" id="emi-dialog">
      <div class="modal-dialog" style="width: 85%;">
          <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title add-label">Add EMI</h4>
            </div>
            <div class="modal-body table-table">
              <form class="form-horizontal" id="emi-form">
                <input id="emi-pk" name="pk" type="hidden" value="">
                <!-- Text input-->
                <div class="col-md-12">
                  <div class="col-md-6">

                    <div class="form-group">
                      <label class="col-md-4 control-label" for="emi_amount">Amount</label>  
                      <div class="col-md-8">
                      <input id="emi_amount" disabled="disabled" name="emi_amount" placeholder="Amount" class="form-control input-md" required="" type="text">
                      </div>
                    </div>

                    <!-- Textarea -->
                    <div class="form-group">
                      <label class="col-md-4 control-label" for="emp_paid_date">Date</label>
                      <div class="col-md-8">                     
                        <input id="emp_paid_date" name="emp_paid_date" placeholder="Date" class="form-control input-md datepicker hasDatepicker" required="" type="text">
                      </div>
                    </div>

                  </div>

                  <div class="col-md-6">
                    <!-- Text input-->
                    <div class="form-group">
                      <label class="col-md-4 control-label" for="emp_payment_method">Payment Method</label>  
                      <div class="col-md-8">
                        <select id="emp_payment_method" name="emp_payment_method" class="form-control input-md">
                          <option value="Cash">Cash</option>
                          <option value="DD">DD</option>
                          <option value="Cheque">Cheque</option>
                          <option value="Online Transfer">Online Transfer</option>
                        </select>
                      </div>
                    </div>

                    <!-- Text input-->
                    <div class="form-group">
                      <label class="col-md-4 control-label" for="emp_txn_no">Transaction No</label>  
                      <div class="col-md-8">
                      <input id="emp_txn_no" name="emp_txn_no" placeholder="Transaction No" class="form-control input-md" type="text">
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </div>
            <div class="modal-footer">
                <a href="javascript:;" class="btn btn-sm btn-success" id="save-emi" data-pk="">Save</a>
                <a href="javascript:;" class="btn btn-sm btn-white" data-dismiss="modal">Close</a>
            </div>
          </div>
      </div>
  </div>
  <!-- #modal-message -->

  <!-- #modal-alert -->
  <div class="modal fade" id="complete-confirm">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                  <h4 class="modal-title">Confirmtion</h4>
              </div>
              <div class="modal-body">
                  <div class="alert alert-danger m-b-0">
                      <h4><i class="fa fa-info-circle"></i> Do you really want to complete transaction?</h4>
                      <p>The record will permanantly updated in database!</p>
                  </div>
              </div>
              <div class="modal-footer">
                  <a href="javascript:;" class="btn btn-sm btn-white" data-dismiss="modal">Close</a>
                  <a href="javascript:;" class="btn btn-sm btn-danger" id="complete-record" data-pk="">Complete</a>
              </div>
          </div>
      </div>
  </div>
  <!-- #modal-alert -->

{% endblock %}


{% block page_js %}
    <!-- ================== BEGIN PAGE LEVEL JS ================== -->
    <script src="{% static "assets/plugins/gritter/js/jquery.gritter.js"%}"></script>
    <script src="{% static "assets/plugins/DataTables/js/jquery.dataTables.min-new.js"%}"></script>
    <script src="{% static "assets/plugins/DataTables/js/dataTables.buttons.min-new.js"%}"></script>
    <script src="{% static "assets/plugins/DataTables/js/buttons.print.min.js"%}"></script>

    <script src="{% static "assets/js/apps.js"%}"></script>
    <script src="{% static "assets/js/accounts/sales/edit.js"%}"></script>
    <!-- ================== END PAGE LEVEL JS ================== -->
    
    <script>
        $(document).ready(function() {
            App.init();
        });
    </script>
{% endblock %}
